(library
    (name cosmium)
    (c_library_flags :standard -lstdc++ -lbz2 -lexpat -lz)
    (foreign_archives binding)
)

(rule
    (deps (source_tree osm))
    (targets libbinding.a dllbinding.so)
    (action
        (no-infer
            (progn
                (chdir osm (run make))
                (copy osm/libbindingsh.so dllbinding.so)
                (copy osm/libbinding.a libbinding.a)
))))
